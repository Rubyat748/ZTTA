<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel | ExoPlanet Atlas</title>

  <!-- Same Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --primary:#00d4ff;--secondary:#ff00aa;--glow:0 0 20px rgba(0,212,255,.6);--transition:all .4s ease;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Inter',sans-serif;background:#000;color:#fff;overflow-x:hidden;}
    .bg{position:fixed;top:0;left:0;width:100%;height:100%;background:url('assets/background.png') center/cover no-repeat;z-index:-2;filter:brightness(.7);}
    .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(0,0,50,.8),rgba(10,0,30,.9));z-index:-1;}

    /* Login */
    #login{display:flex;justify-content:center;align-items:center;height:100vh;}
    #login form{max-width:400px;width:100%;padding:2.5rem;background:rgba(10,10,40,.9);border-radius:20px;text-align:center;box-shadow:var(--glow);}
    #login h2{font-family:'Orbitron',sans-serif;font-size:2.2rem;color:var(--primary);margin-bottom:1rem;}
    #login input{padding:1rem;margin:0.8rem 0;border:2px solid rgba(0,212,255,.3);border-radius:10px;background:rgba(0,0,0,.5);color:#fff;width:100%;font-size:1rem;}
    #login button{background:linear-gradient(45deg,var(--primary),var(--secondary));border:none;padding:1rem;border-radius:10px;color:#fff;font-weight:700;cursor:pointer;transition:var(--transition);}
    #login button:hover{box-shadow:var(--glow);transform:scale(1.02);}

    /* Admin Dashboard */
    #admin{display:none;padding:3rem 1rem;max-width:900px;margin:0 auto;}
    h1{font-family:'Orbitron',sans-serif;font-size:2.8rem;color:var(--primary);text-align:center;margin-bottom:1.5rem;text-shadow:var(--glow);}
    .back-btn{display:inline-block;margin-bottom:2rem;background:var(--secondary);color:#fff;padding:0.8rem 1.5rem;border-radius:10px;text-decoration:none;transition:var(--transition);}
    .back-btn:hover{box-shadow:var(--glow);}

    form{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;background:rgba(10,10,40,.7);padding:2rem;border-radius:15px;border:1px solid rgba(0,212,255,.2);}
    input,select{padding:1rem;border:2px solid rgba(0,212,255,.3);border-radius:10px;background:rgba(0,0,0,.5);color:#fff;font-size:1rem;}
    .file-input{display:none;}
    .file-label{display:inline-block;padding:1rem 1.5rem;background:var(--secondary);color:#fff;border-radius:10px;cursor:pointer;text-align:center;}
    .file-label:hover{box-shadow:var(--glow);}
 Lennox
    button[type="submit"]{grid-column:1/-1;background:linear-gradient(45deg,var(--primary),var(--secondary));border:none;padding:1.2rem;border-radius:10px;color:#fff;font-weight:700;cursor:pointer;transition:var(--transition);}
    button[type="submit"]:hover{box-shadow:0 0 30px rgba(0,212,255,.8);}

    #img-preview{max-width:200px;height:auto;margin-top:1rem;border-radius:10px;display:none;}

    /* Uploaded List */
    #uploaded-list{margin-top:3rem;}
    .uploaded-planet{background:rgba(10,10,40,.8);padding:1.2rem;border-radius:12px;margin:1rem 0;border-left:5px solid var(--primary);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;}
    .uploaded-planet img{width:60px;height:60px;object-fit:cover;border-radius:8px;}
    .delete-btn{background:#ff3366;color:#fff;padding:0.5rem 1rem;border-radius:8px;cursor:pointer;font-size:0.9rem;}
    .delete-btn:hover{background:#cc0022;}

    @media(max-width:768px){
      form{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>

  <div class="bg"></div>
  <div class="overlay"></div>

  <!-- Login -->
  <div id="login">
    <form onsubmit="login(event)">
      <h2>ADMIN LOGIN</h2>
      <input type="password" id="password" placeholder="Enter password" required>
      <button type="submit">LOGIN</button>
    </form>
  </div>

  <!-- Admin Dashboard -->
  <div id="admin">
    <a href="index.html" class="back-btn">Back to Atlas</a>
    <h1>ADD CUSTOM PLANET</h1>

    <form onsubmit="uploadPlanet(event)">
      <input type="text" id="pl_name" placeholder="Planet Name (e.g. Grok-1b)" required>
      <input type="text" id="hostname" placeholder="Host Star (e.g. Proxima)" required>
      <input type="number" id="disc_year" placeholder="Discovery Year (e.g. 2025)" required>
      <select id="discoverymethod" required>
        <option value="">Discovery Method</option>
        <option>Transit</option>
        <option>Radial Velocity</option>
        <option>Imaging</option>
        <option>Microlensing</option>
      </select>
      <input type="number" id="pl_rade" placeholder="Radius (Earth = 1)" step="0.01">
      <input type="number" id="pl_masse" placeholder="Mass (Earth = 1)" step="0.01">
      <input type="number" id="pl_eqt" placeholder="Temperature (K)" step="1">
      <input type="number" id="st_dist" placeholder="Distance (light-years)" step="0.1">
      <select id="pl_habitable">
        <option value="0">Not Habitable</option>
        <option value="1">Habitable Zone</option>
      </select>

      <input type="file" id="customImg" class="file-input" accept="image/*">
      <label for="customImg" class="file-label">Upload Image</label>
      <img id="img-preview" alt="Preview">

      <button type="submit">ADD PLANET TO ATLAS</button>
    </form>

    <div id="uploaded-list">
      <h3>Custom Planets (<span id="count">0</span>)</h3>
      <div id="list"></div>
    </div>
  </div>

  <script>
    const ADMIN_PASSWORD = 'admin123';  // CHANGE THIS FOR SECURITY!

    function login(e) {
      e.preventDefault();
      const input = document.getElementById('password').value;
      if (input === ADMIN_PASSWORD) {
        document.getElementById('login').style.display = 'none';
        document.getElementById('admin').style.display = 'block';
        loadUploaded();
      } else {
        alert('Wrong password!');
      }
    }

    // Image Preview
    document.getElementById('customImg').addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.size < 1.5 * 1024 * 1024) {  // <1.5MB
        const reader = new FileReader();
        reader.onload = (ev) => {
          const preview = document.getElementById('img-preview');
          preview.src = ev.target.result;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        alert('Image too large! Max 1.5MB');
      }
    });

    // Upload Planet
    function uploadPlanet(e) {
      e.preventDefault();
      const planet = {
        pl_name: document.getElementById('pl_name').value,
        hostname: document.getElementById('hostname').value,
        disc_year: parseInt(document.getElementById('disc_year').value),
        discoverymethod: document.getElementById('discoverymethod').value,
        pl_rade: parseFloat(document.getElementById('pl_rade').value) || null,
        pl_masse: parseFloat(document.getElementById('pl_masse').value) || null,
        pl_eqt: parseInt(document.getElementById('pl_eqt').value) || null,
        st_dist: parseFloat(document.getElementById('st_dist').value) || null,
        pl_habitable: parseInt(document.getElementById('pl_habitable').value),
        customImg: document.getElementById('img-preview').src || null
      };

      let customs = JSON.parse(localStorage.getItem('customPlanets') || '[]');
      customs.unshift(planet);  // Newest first
      localStorage.setItem('customPlanets', JSON.stringify(customs));

      alert('Planet added! Refresh index.html to see it.');
      e.target.reset();
      document.getElementById('img-preview').style.display = 'none';
      loadUploaded();
    }

    // Load & Display Uploaded Planets
    function loadUploaded() {
      const customs = JSON.parse(localStorage.getItem('customPlanets') || '[]');
      document.getElementById('count').textContent = customs.length;
      document.getElementById('list').innerHTML = customs.map((p, i) => `
        <div class="uploaded-planet">
          <div>
            <strong>${p.pl_name}</strong> • ${p.hostname} • ${p.disc_year}
            ${p.customImg ? `<img src="${p.customImg}" alt="">` : ''}
          </div>
          <button class="delete-btn" onclick="deletePlanet(${i})">Delete</button>
        </div>
      `).join('');
    }

    function deletePlanet(index) {
      let customs = JSON.parse(localStorage.getItem('customPlanets') || '[]');
      customs.splice(index, 1);
      localStorage.setItem('customPlanets', JSON.stringify(customs));
      loadUploaded();
      alert('Deleted! Refresh index.html.');
    }
  </script>
</body>
</html>

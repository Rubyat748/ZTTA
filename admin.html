<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ExoPlanet Atlas Admin</title>

  <!-- Same Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --primary:#00d4ff;--secondary:#ff00aa;--dark:#0a0a1a;--light:#f0f8ff;
      --glow:0 0 20px rgba(0,212,255,.6);--transition:all .4s cubic-bezier(.25,.8,.25,1);
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Inter',sans-serif;background:#000;color:var(--light);line-height:1.7;}
    .bg{position:fixed;top:0;left:0;width:100%;height:100%;background:url('assets/background.png') center/cover no-repeat;z-index:-2;filter:brightness(.7);}
    .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(0,0,50,.8),rgba(10,0,30,.9));z-index:-1;}

    /* Login */
    #login{display:flex;justify-content:center;align-items:center;height:100vh;text-align:center;}
    #login form{max-width:400px;width:100%;padding:2rem;background:rgba(10,10,40,.8);border-radius:20px;}
    #login input{padding:1rem;margin:1rem;border:2px solid rgba(0,212,255,.3);border-radius:10px;background:rgba(0,0,0,.5);color:#fff;}
    #login button{background:var(--primary);color:#fff;border:none;padding:1rem;border-radius:10px;cursor:pointer;}

    /* Admin Dashboard */
    #admin{display:none;padding:2rem;max-width:800px;margin:0 auto;}
    h1{font-family:'Orbitron',sans-serif;font-size:3rem;color:var(--primary);text-align:center;margin-bottom:2rem;}
    form{display:grid;gap:1rem;}
    input,select,textarea{padding:1rem;border:2px solid rgba(0,212,255,.3);border-radius:10px;background:rgba(0,0,0,.5);color:#fff;}
    .file-input{display:none;}
    .file-label{display:inline-block;padding:1rem;background:var(--secondary);color:#fff;border-radius:10px;cursor:pointer;}
    button{background:linear-gradient(45deg,var(--primary),var(--secondary));color:#fff;border:none;padding:1rem;border-radius:10px;cursor:pointer;transition:var(--transition);}
    button:hover{box-shadow:var(--glow);}

    /* Uploaded List */
    #uploaded-list{margin-top:3rem;}
    .uploaded-planet{background:rgba(10,10,40,.7);padding:1rem;border-radius:10px;margin:1rem 0;border-left:4px solid var(--primary);}
    .delete-btn{background:red;float:right;padding:0.5rem;border-radius:5px;font-size:0.8rem;}

    /* Responsive */
    @media(max-width:768px){#admin form{grid-template-columns:1fr;}}
  </style>
</head>
<body>

  <div class="bg"></div>
  <div class="overlay"></div>

  <!-- Login -->
  <div id="login">
    <form onsubmit="login(event)">
      <h2>Admin Login</h2>
      <input type="password" id="password" placeholder="Enter password (default: admin123)" required>
      <button type="submit">Login</button>
    </form>
  </div>

  <!-- Admin Dashboard -->
  <div id="admin">
    <h1><i class="fas fa-cog"></i> ExoPlanet Admin</h1>
    <a href="index.html" style="display:inline-block;margin-bottom:2rem;background:var(--secondary);color:#fff;padding:1rem;border-radius:10px;text-decoration:none;">‚Üê Back to Site</a>

    <!-- Upload Form -->
    <form onsubmit="uploadPlanet(event)">
      <h3>Add Custom Planet</h3>
      <input type="text" id="pl_name" placeholder="Planet Name (e.g., MyPlanet-1)" required>
      <input type="text" id="hostname" placeholder="Host Star (e.g., MyStar)" required>
      <input type="number" id="disc_year" placeholder="Discovery Year (e.g., 2025)" required>
      <select id="discoverymethod" required>
        <option value="">Discovery Method</option>
        <option>Transit</option>
        <option>Radial Velocity</option>
        <option>Imaging</option>
        <option>Microlensing</option>
      </select>
      <input type="number" id="pl_rade" placeholder="Radius (Earth radii, e.g., 1.2)" step="0.1">
      <input type="number" id="pl_masse" placeholder="Mass (Earth masses, e.g., 1.5)" step="0.1">
      <input type="number" id="pl_eqt" placeholder="Equilibrium Temp (K, e.g., 280)" step="1">
      <input type="number" id="st_dist" placeholder="Distance (light-years, e.g., 50)" step="0.1">
      <select id="pl_habitable">
        <option value="0">Not Habitable</option>
        <option value="1">Habitable Zone</option>
      </select>
      <input type="file" id="customImg" class="file-input" accept="image/*">
      <label for="customImg" class="file-label"><i class="fas fa-upload"></i> Upload Planet Image</label>
      <img id="img-preview" style="max-width:200px;height:auto;display:none;margin-top:1rem;">
      <button type="submit">Add Planet</button>
    </form>

    <!-- Uploaded Planets List -->
    <div id="uploaded-list">
      <h3>Custom Planets (<span id="count">0</span>)</h3>
      <div id="list"></div>
    </div>
  </div>

  <script>
    const ADMIN_PASSWORD = 'admin123';  // Change this for security!

    function login(e) {
      e.preventDefault();
      if (document.getElementById('password').value === ADMIN_PASSWORD) {
        document.getElementById('login').style.display = 'none';
        document.getElementById('admin').style.display = 'block';
        loadUploaded();
      } else {
        alert('Wrong password!');
      }
    }

    // Image preview
    document.getElementById('customImg').addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.size < 1024 * 1024) {  // 1MB limit
        const reader = new FileReader();
        reader.onload = (ev) => {
          document.getElementById('img-preview').src = ev.target.result;
          document.getElementById('img-preview').style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        alert('Image too large (max 1MB)');
      }
    });

    function uploadPlanet(e) {
      e.preventDefault();
      const planet = {
        pl_name: document.getElementById('pl_name').value,
        hostname: document.getElementById('hostname').value,
        disc_year: parseInt(document.getElementById('disc_year').value),
        discoverymethod: document.getElementById('discoverymethod').value,
        pl_rade: parseFloat(document.getElementById('pl_rade').value) || null,
        pl_masse: parseFloat(document.getElementById('pl_masse').value) || null,
        pl_eqt: parseInt(document.getElementById('pl_eqt').value) || null,
        st_dist: parseFloat(document.getElementById('st_dist').value) || null,
        pl_habitable: parseInt(document.getElementById('pl_habitable').value),
        customImg: document.getElementById('img-preview').src || null
      };

      let customs = JSON.parse(localStorage.getItem('customPlanets') || '[]');
      customs.push(planet);
      localStorage.setItem('customPlanets', JSON.stringify(customs));
      alert('Planet added! Refresh index.html to see it.');
      e.target.reset();
      document.getElementById('img-preview').style.display = 'none';
      loadUploaded();
    }

    function loadUploaded() {
      const customs = JSON.parse(localStorage.getItem('customPlanets') || '[]');
      document.getElementById('count').textContent = customs.length;
      document.getElementById('list').innerHTML = customs.map((p, i) => `
        <div class="uploaded-planet">
          <strong>${p.pl_name}</strong> (${p.hostname}) - ${p.disc_year}<br>
          ${p.customImg ? '<img src="' + p.customImg + '" style="width:50px;height:50px;object-fit:cover;">' : 'No Image'}
          <button class="delete-btn" onclick="deletePlanet(${i})">Delete</button>
        </div>
      `).join('');
    }

    function deletePlanet(index) {
      let customs = JSON.parse(localStorage.getItem('customPlanets') || '[]');
      customs.splice(index, 1);
      localStorage.setItem('customPlanets', JSON.stringify(customs));
      loadUploaded();
      alert('Deleted! Refresh index.html.');
    }
  </script>
</body>
</html>
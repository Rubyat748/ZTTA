<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ExoPlanet Atlas – Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* ====================== GLOBAL ====================== */
:root{
  --primary:#00d4ff;--secondary:#ff00aa;--glow:0 0 20px rgba(0,212,255,.6);
  --transition:all .4s ease;--bg:#000814;--card:#0a1a2f;--border:rgba(0,212,255,.3);
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Inter',sans-serif;background:var(--bg);color:#fff;overflow:hidden;position:relative;min-height:100vh;}

/* ====================== BACKGROUND ====================== */
.space-bg{
  position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;
  background:
    radial-gradient(circle at 20% 80%,rgba(120,119,198,.3)0%,transparent 50%),
    radial-gradient(circle at 80% 20%,rgba(0,212,255,.2)0%,transparent 50%),
    radial-gradient(circle at 40% 40%,rgba(255,0,170,.15)0%,transparent 50%),
    #000814;
}
.stars{
  position:absolute;width:2px;height:2px;background:#fff;border-radius:50%;
  box-shadow:0 0 8px #fff;animation:twinkle 3s infinite alternate;
}
@keyframes twinkle{0%{opacity:.3;transform:scale(.8)}100%{opacity:1;transform:scale(1.2)}}

/* ====================== LOGIN ====================== */
#loginScreen{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  width:100%;height:100vh;
}
.form{
  display:flex;flex-direction:column;gap:15px;padding:2.5em 2em;
  background:#171717;border-radius:25px;box-shadow:0 10px 30px rgba(0,0,0,.5);
  width:320px;transition:var(--transition);border:1px solid rgba(255,255,255,.1);
}
.form:hover{transform:scale(1.03);box-shadow:0 15px 40px rgba(0,212,255,.2);}
#heading{color:var(--primary);font-size:1.6rem;font-weight:700;text-align:center;
  text-shadow:var(--glow);margin-bottom:.5rem;}
.field{
  display:flex;align-items:center;gap:.6rem;padding:.7rem 1rem;
  background:#1f1f1f;border-radius:25px;box-shadow:inset 2px 5px 10px rgb(5,5,5);
  transition:var(--transition);
}
.field:focus-within{box-shadow:0 0 15px rgba(0,212,255,.4);border:1px solid var(--primary);}
.input-icon{height:1.3rem;width:1.3rem;fill:var(--primary);}
.input-field{
  background:none;border:none;outline:none;width:100%;color:#e0e0e0;font-size:1rem;
}
.input-field::placeholder{color:#888;}
.btn{margin-top:1.5rem;display:flex;justify-content:center;}
.button1{
  width:100%;padding:.8rem;border:none;border-radius:50px;
  background:linear-gradient(45deg,var(--primary),var(--secondary));
  color:#fff;font-weight:600;font-size:1.1rem;cursor:pointer;
  box-shadow:0 5px 15px rgba(0,212,255,.3);transition:var(--transition);
}
.button1:hover{transform:translateY(-3px);box-shadow:0 10px 25px rgba(0,212,255,.5);}

/* ====================== ADMIN PANEL ====================== */
#adminPanel{display:none;position:absolute;top:0;left:0;width:100%;height:100vh;
  background:rgba(0,8,20,.96);backdrop-filter:blur(12px);z-index:20;
  padding:2rem;overflow-y:auto;}
.back-btn{
  display:inline-block;margin:1rem 0;background:var(--secondary);color:#fff;
  padding:.8rem 1.6rem;border-radius:12px;text-decoration:none;font-weight:600;
  transition:var(--transition);
}
.back-btn:hover{box-shadow:var(--glow);transform:translateY(-2px);}
h1{font-family:'Orbitron',sans-serif;font-size:2.8rem;color:var(--primary);
  text-align:center;margin:1.5rem 0;text-shadow:var(--glow);}

/* Form */
form{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.2rem;
  background:var(--card);padding:2.5rem;border-radius:18px;border:1px solid var(--border);
  margin-bottom:2rem;box-shadow:0 8px 32px rgba(0,0,0,.3);
}
input,select{
  padding:1rem;border:2px solid var(--border);border-radius:12px;
  background:rgba(0,0,0,.4);color:#fff;font-size:1rem;transition:var(--transition);
}
input:focus,select:focus{outline:none;border-color:var(--primary);
  box-shadow:0 0 15px rgba(0,212,255,.4);}
.file-input{display:none;}
.file-label{
  display:inline-block;padding:1rem 2rem;background:var(--secondary);color:#fff;
  border-radius:12px;cursor:pointer;text-align:center;font-weight:600;
  transition:var(--transition);
}
.file-label:hover{box-shadow:var(--glow);transform:translateY(-2px);}
button[type=submit]{
  grid-column:1/-1;background:linear-gradient(45deg,var(--primary),var(--secondary));
  border:none;padding:1.3rem;border-radius:12px;color:#fff;font-weight:700;
  font-size:1.1rem;cursor:pointer;transition:var(--transition);
}
button[type=submit]:hover{box-shadow:0 0 30px rgba(0,212,255,.8);transform:translateY(-3px);}
#img-preview{max-width:220px;height:auto;margin-top:1rem;border-radius:12px;display:none;
  border:2px solid var(--primary);}

/* Planet Grid */
#list{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem;margin-top:1rem;}
.uploaded-planet{
  background:var(--card);padding:1.3rem;border-radius:14px;
  border-left:5px solid var(--primary);transition:.3s;text-align:center;
}
.uploaded-planet:hover{transform:translateY(-5px);box-shadow:0 8px 25px rgba(0,212,255,.3);}
.uploaded-planet img{width:100%;height:120px;object-fit:cover;border-radius:10px;
  margin-bottom:.8rem;border:2px solid var(--primary);}
.uploaded-planet strong{display:block;font-size:1.1rem;margin-bottom:.3rem;color:var(--primary);}
.btn-group{margin-top:.8rem;display:flex;gap:.5rem;justify-content:center;}
.btn-group button{
  flex:1;background:#ff3366;color:#fff;padding:.5rem;border:none;
  border-radius:8px;cursor:pointer;font-size:.85rem;transition:.3s;
}
.btn-group button:first-child{background:#00d4ff;}
.btn-group button:hover{opacity:.9;transform:scale(1.05);}

/* Responsive */
@media(max-width:1200px){#list{grid-template-columns:repeat(3,1fr);}}
@media(max-width:900px){#list{grid-template-columns:repeat(2,1fr);}}
@media(max-width:600px){
  #list{grid-template-columns:1fr;} form{grid-template-columns:1fr;} h1{font-size:2.2rem;}
}
</style>
</head>
<body>

<div class="space-bg"></div>

<!-- ====================== LOGIN ====================== -->
<div id="loginScreen">
  <form class="form" id="loginForm">
    <p id="heading">ADMIN LOGIN</p>

    <div class="field">
      <svg class="input-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M13.106 7.222c0-2.967-2.249-5.032-5.482-5.032-3.35 0-5.646 2.318-5.646 5.702 0 3.493 2.235 5.708 5.762 5.708.862 0 1.689-.123 2.304-.335v-.862c-.43.199-1.354.328-2.29.328-2.926 0-4.813-1.88-4.813-4.798 0-2.844 1.921-4.881 4.594-4.881 2.735 0 4.608 1.688 4.608 4.156 0 1.682-.554 2.769-1.416 2.769-.492 0-.772-.28-.772-.76V5.206H8.923v.834h-.11c-.266-.595-.881-.964-1.6-.964-1.4 0-2.378 1.162-2.378 2.823 0 1.737.957 2.906 2.379 2.906.8 0 1.415-.39 1.709-1.087h.11c.081.67.703 1.148 1.503 1.148 1.572 0 2.57-1.415 2.57-3.643zm-7.177.704c0-1.197.54-1.907 1.456-1.907.93 0 1.524.738 1.524 1.907S8.308 9.84 7.371 9.84c-.895 0-1.442-.725-1.442-1.914z"/></svg>
      <input class="input-field" type="text" id="username" placeholder="Username" autocomplete="off" required>
    </div>

    <div class="field">
      <svg class="input-icon" viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/></svg>
      <input class="input-field" type="password" id="password" placeholder="Password" required>
    </div>

    <div class="btn"><button type="submit" class="button1">LOGIN</button></div>
  </form>
</div>

<!-- ====================== ADMIN PANEL ====================== -->
<div id="adminPanel">
  <a href="index.html" class="back-btn">Back to Atlas</a>
  <h1>ADMIN PANEL</h1>

  <form id="planet-form">
    <input type="text" id="pl_name" placeholder="Planet Name" required>
    <input type="text" id="hostname" placeholder="Host Star" required>
    <input type="number" id="disc_year" placeholder="Discovery Year" required>
    <select id="discoverymethod" required>
      <option value="">Discovery Method</option>
      <option>Transit</option><option>Radial Velocity</option>
      <option>Imaging</option><option>Microlensing</option>
    </select>
    <input type="number" id="pl_rade" placeholder="Radius (Earth = 1)" step="0.01">
    <input type="number" id="pl_masse" placeholder="Mass (Earth = 1)" step="0.01">
    <input type="number" id="pl_eqt" placeholder="Temperature (K)" step="1">
    <input type="number" id="st_dist" placeholder="Distance (light-years)" step="0.1">
    <select id="pl_habitable"><option value="0">Not Habitable</option><option value="1">Habitable Zone</option></select>

    <input type="file" id="customImg" class="file-input" accept="image/*">
    <label for="customImg" class="file-label">Upload Image</label>
    <img id="img-preview" alt="Preview">

    <button type="submit">ADD PLANET</button>
  </form>

  <div id="uploaded-list">
    <h3>Exoplanets (<span id="count">0</span>)</h3>
    <div id="list"></div>
  </div>
</div>

<script>
/* ====================== LOGIN LOGIC ====================== */
const loginForm = document.getElementById('loginForm');
const loginScreen = document.getElementById('loginScreen');
const adminPanel = document.getElementById('adminPanel');
const usernameInp = document.getElementById('username');
const passwordInp = document.getElementById('password');

const USER = 'Rubyat';
const PASS = 'Rubyat@79';

loginForm.addEventListener('submit', e=>{
  e.preventDefault();
  if(usernameInp.value.trim()===USER && passwordInp.value===PASS){
    loginScreen.style.display='none';
    adminPanel.style.display='block';
    loadUploaded();
  }else{
    loginForm.style.animation='shake 0.5s';
    setTimeout(()=>loginForm.style.animation='',500);
    alert('Incorrect Username or Password!');
  }
});

/* ====================== ADMIN LOGIC ====================== */
const planetForm = document.getElementById('planet-form');
const imgInput = document.getElementById('customImg');
const imgPrev  = document.getElementById('img-preview');

/* Image preview */
imgInput.addEventListener('change', e=>{
  const file = e.target.files[0];
  if(file && file.size<1.5*1024*1024){
    const reader = new FileReader();
    reader.onload = ev=>{ imgPrev.src=ev.target.result; imgPrev.style.display='block'; };
    reader.readAsDataURL(file);
  }else alert('Image too large! Max 1.5 MB');
});

/* 100 default exoplanets (no Solar System) */
const defaultPlanets = [
  {pl_name:"Kepler-22b",hostname:"Kepler-22",disc_year:2011,discoverymethod:"Transit",pl_rade:2.4,pl_masse:20,pl_eqt:295,st_dist:600,pl_habitable:1},
  {pl_name:"TRAPPIST-1d",hostname:"TRAPPIST-1",disc_year:2016,discoverymethod:"Transit",pl_rade:0.77,pl_masse:0.3,pl_eqt:288,st_dist:39,pl_habitable:1},
  {pl_name:"Proxima Centauri b",hostname:"Proxima Centauri",disc_year:2016,discoverymethod:"Radial Velocity",pl_rade:1.1,pl_masse:1.3,pl_eqt:234,st_dist:4.2,pl_habitable:1},
  {pl_name:"HD 189733 b",hostname:"HD 189733",disc_year:2005,discoverymethod:"Transit",pl_rade:11.2,pl_masse:360,pl_eqt:1200,st_dist:64,pl_habitable:0},
  {pl_name:"55 Cancri e",hostname:"55 Cancri",disc_year:2004,discoverymethod:"Radial Velocity",pl_rade:2.0,pl_masse:8.0,pl_eqt:1950,st_dist:41,pl_habitable:0},
  ...Array.from({length:95},(_,i)=>{
    const names=["Zeta","Kelt","HAT-P","WASP","TOI","K2","XO","CoRoT","NGTS","TESS"];
    const methods=["Transit","Radial Velocity","Imaging","Microlensing"];
    return{
      pl_name:`${names[i%10]}-${100+i}b`,
      hostname:`${names[i%10]}-${100+i}`,
      disc_year:2010+(i%16),
      discoverymethod:methods[i%4],
      pl_rade:parseFloat((Math.random()*20+.5).toFixed(2)),
      pl_masse:parseFloat((Math.random()*2000+.1).toFixed(2)),
      pl_eqt:Math.floor(Math.random()*3000+100),
      st_dist:parseFloat((Math.random()*5000+5).toFixed(1)),
      pl_habitable:Math.random()>.85?1:0,
      customImg:null
    };
  })
];
if(!localStorage.getItem('customPlanets')) localStorage.setItem('customPlanets',JSON.stringify(defaultPlanets));

/* Add planet */
planetForm.onsubmit = e=>{
  e.preventDefault();
  const planet = {
    pl_name:document.getElementById('pl_name').value.trim(),
    hostname:document.getElementById('hostname').value.trim(),
    disc_year:parseInt(document.getElementById('disc_year').value),
    discoverymethod:document.getElementById('discoverymethod').value,
    pl_rade:parseFloat(document.getElementById('pl_rade').value)||null,
    pl_masse:parseFloat(document.getElementById('pl_masse').value)||null,
    pl_eqt:parseInt(document.getElementById('pl_eqt').value)||null,
    st_dist:parseFloat(document.getElementById('st_dist').value)||null,
    pl_habitable:parseInt(document.getElementById('pl_habitable').value),
    customImg:imgPrev.src||null
  };
  let arr = JSON.parse(localStorage.getItem('customPlanets')||'[]');
  arr.unshift(planet);
  localStorage.setItem('customPlanets',JSON.stringify(arr));
  alert('Planet added!');
  planetForm.reset(); imgPrev.style.display='none';
  loadUploaded();
};

/* Load list */
function loadUploaded(){
  const arr = JSON.parse(localStorage.getItem('customPlanets')||'[]');
  document.getElementById('count').textContent = arr.length;
  document.getElementById('list').innerHTML = arr.map((p,i)=>`
    <div class="uploaded-planet">
      ${p.customImg?`<img src="${p.customImg}" alt="${p.pl_name}">`:
       '<div style="height:120px;background:#111;border:2px dashed #333;border-radius:10px;"></div>'}
      <strong>${p.pl_name}</strong>
      <small>${p.hostname} • ${p.disc_year}</small>
      <div class="btn-group">
        <button onclick="editPlanet(${i})">Edit</button>
        <button onclick="deletePlanet(${i})">Delete</button>
      </div>
    </div>`).join('');
}

/* Edit */
window.editPlanet = idx=>{
  const arr = JSON.parse(localStorage.getItem('customPlanets')||'[]');
  const p = arr[idx];
  if(confirm(`Edit "${p.pl_name}"?`)){
    document.getElementById('pl_name').value = p.pl_name;
    document.getElementById('hostname').value = p.hostname;
    document.getElementById('disc_year').value = p.disc_year;
    document.getElementById('discoverymethod').value = p.discoverymethod;
    document.getElementById('pl_rade').value = p.pl_rade||'';
    document.getElementById('pl_masse').value = p.pl_masse||'';
    document.getElementById('pl_eqt').value = p.pl_eqt||'';
    document.getElementById('st_dist').value = p.st_dist||'';
    document.getElementById('pl_habitable').value = p.pl_habitable;
    if(p.customImg){imgPrev.src=p.customImg;imgPrev.style.display='block';}
    arr.splice(idx,1);
    localStorage.setItem('customPlanets',JSON.stringify(arr));
    loadUploaded();
  }
};

/* Delete */
window.deletePlanet = idx=>{
  if(confirm('Delete this planet?')){
    const arr = JSON.parse(localStorage.getItem('customPlanets')||'[]');
    arr.splice(idx,1);
    localStorage.setItem('customPlanets',JSON.stringify(arr));
    loadUploaded();
  }
};

/* Background stars */
window.addEventListener('load',()=>{
  const bg=document.querySelector('.space-bg');
  for(let i=0;i<150;i++){
    const s=document.createElement('div');
    s.className='stars';
    s.style.top=Math.random()*100+'%';
    s.style.left=Math.random()*100+'%';
    s.style.animationDelay=Math.random()*3+'s';
    bg.appendChild(s);
  }
});

/* Shake animation */
const shake = `@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-10px)}20%,40%,60%,80%{transform:translateX(10px)}}`;
const style=document.createElement('style');
style.textContent=shake;
document.head.appendChild(style);
</script>
</body>
</html>
